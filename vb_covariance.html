
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Benchmarks for covariance &mdash; Vbench performance benchmarks for scikit-learn</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.12-git',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Vbench performance benchmarks for scikit-learn" href="index.html" />
    <link rel="next" title="Benchmarks for decomposition" href="vb_decomposition.html" />
    <link rel="prev" title="Benchmarks for cluster" href="vb_cluster.html" />

  <!-- Reference the theme's stylesheet on the Google CDN -->
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/excite-bike/jquery-ui.css"
        type="text/css" rel="Stylesheet" />
 
  <!-- Reference jQuery and jQuery UI from the CDN. Remember
       that the order of these two elements is important -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>

<script type="text/javascript">
      $(function(){
        $(".profiler-output").accordion({collapsible: true, header: "p", active: false} );
      });
    </script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22606712-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>

    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="http://scikit-learn.org/">
            <img src="_static/scikit-learn-logo-small.png" alt="Logo"/>
          </a>
          </p><div class="navbar">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="quick_start.html">Speed Quick Start</a></li>
            <li><a href="http://scikit-learn.org/dev/user_guide.html">User's Guide</a></li>
            <li><a href="http://scikit-learn.org/dev/developers/performance.html">Performance</a></li>
            <li><a href="http://github.com/scikit-learn/scikit-learn">Github</a></li>
            <li><a href="http://github.com/vene/scikit-learn-speed">Speed Github</a></li>
       </ul>
</div>
<!-- end navbar --></div>
    </div>

    <div class="content-wrapper">

      <div class="sphinxsidebar">
	<div class="sphinxsidebarwrapper">
          <h3>Table Of Contents</h3>
          
          <!--
	   <div class="rel rellarge">
	     
	<!-- rellinks[1:] is an ugly hack to avoid link to module
	    index  --
	<div class="rellink">
	<a href="vb_cluster.html" title="Benchmarks for cluster"
	    accesskey="P">Previous
	    <br>
	    <span class="smallrellink">
	    Benchmarks for c...
	    </span>
	    <span class="hiddenrellink">
	    Benchmarks for cluster
	    </span>
	    
	    </a>
	</div>
	    <div class="spacer">
	    &nbsp;
	    </div>
	
	<div class="rellink">
	<a href="vb_decomposition.html" title="Benchmarks for decomposition"
	    accesskey="N">Next
	    <br>
	    <span class="smallrellink">
	    Benchmarks for d...
	    </span>
	    <span class="hiddenrellink">
	    Benchmarks for decomposition
	    </span>
	    
	    </a>
	</div>
	<!-- Ad a link to the 'up' page --
    </div>
    <p style="text-align: center; background-color: #FFE4E4">This documentation is
    for scikit-learn <strong>version 0.12-git</strong>
    &mdash; <a href="http://scikit-learn.org/stable/support.html#documentation-resources">Other versions</a></p>
    
    <h3>Citing</h3>
    <p>If you use the software, please consider
    <a href="about.html#citing-scikit-learn">citing scikit-learn</a>.</p>
    <h3>This page</h3>
	<ul>
<li><a class="reference internal" href="#">Benchmarks for covariance</a><ul>
<li><a class="reference internal" href="#graphlasso-minimadelon">GraphLasso-minimadelon</a></li>
<li><a class="reference internal" href="#graphlasso-madelon">GraphLasso-madelon</a></li>
<li><a class="reference internal" href="#mincovdet-blobs">MinCovDet-blobs</a></li>
<li><a class="reference internal" href="#shrunkcovariance-minimadelon">ShrunkCovariance-minimadelon</a></li>
<li><a class="reference internal" href="#shrunkcovariance-madelon">ShrunkCovariance-madelon</a></li>
<li><a class="reference internal" href="#ledoitwolf-minimadelon">LedoitWolf-minimadelon</a></li>
<li><a class="reference internal" href="#ledoitwolf-madelon">LedoitWolf-madelon</a></li>
<li><a class="reference internal" href="#oas-minimadelon">OAS-minimadelon</a></li>
<li><a class="reference internal" href="#oas-madelon">OAS-madelon</a></li>
</ul>
</li>
</ul>

    
  -->
    </div>
	  </div>


      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="benchmarks-for-covariance">
<h1>Benchmarks for covariance<a class="headerlink" href="#benchmarks-for-covariance" title="Permalink to this headline">¶</a></h1>
<div class="section" id="graphlasso-minimadelon">
<h2>GraphLasso-minimadelon<a class="headerlink" href="#graphlasso-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">GraphLasso</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">GraphLasso</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/GraphLasso-minimadelon-step0-timing.png"><img alt="_images/GraphLasso-minimadelon-step0-timing.png" src="_images/GraphLasso-minimadelon-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/GraphLasso-minimadelon-step0-memory.png"><img alt="_images/GraphLasso-minimadelon-step0-memory.png" src="_images/GraphLasso-minimadelon-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>Traceback</p>
<div class="highlight-python"><pre>   Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 150, in run
    exec step in ns
  File "&lt;string&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 280, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 219, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 260, in run
    mem_usages = magic_memit(ns, self.code, repeat=self.mem_repeat)
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 672, in magic_memit
    raise RuntimeError('ERROR: all subprocesses exited unsuccessfully.'
RuntimeError: ERROR: all subprocesses exited unsuccessfully. Try again with the `-i` option.
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 293, in run
    prof.runcall(f)
  File "/sp/lib/python/cpython-2.7.4/lib/python2.7/cProfile.py", line 149, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 288, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 280, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 219, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 351, in run
    prof.runcall(f)
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/line_profiler.py", line 137, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 348, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 280, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 219, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver</pre>
</div>
</div>
</div>
<div class="section" id="graphlasso-madelon">
<h2>GraphLasso-madelon<a class="headerlink" href="#graphlasso-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">GraphLasso</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">GraphLasso</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/GraphLasso-madelon-step0-timing.png"><img alt="_images/GraphLasso-madelon-step0-timing.png" src="_images/GraphLasso-madelon-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/GraphLasso-madelon-step0-memory.png"><img alt="_images/GraphLasso-madelon-step0-memory.png" src="_images/GraphLasso-madelon-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>Traceback</p>
<div class="highlight-python"><pre>   Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 150, in run
    exec step in ns
  File "&lt;string&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 280, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 219, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 260, in run
    mem_usages = magic_memit(ns, self.code, repeat=self.mem_repeat)
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 672, in magic_memit
    raise RuntimeError('ERROR: all subprocesses exited unsuccessfully.'
RuntimeError: ERROR: all subprocesses exited unsuccessfully. Try again with the `-i` option.
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 293, in run
    prof.runcall(f)
  File "/sp/lib/python/cpython-2.7.4/lib/python2.7/cProfile.py", line 149, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 288, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 280, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 219, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 351, in run
    prof.runcall(f)
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/line_profiler.py", line 137, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py", line 348, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 280, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 219, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver</pre>
</div>
</div>
</div>
<div class="section" id="mincovdet-blobs">
<h2>MinCovDet-blobs<a class="headerlink" href="#mincovdet-blobs" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">MinCovDet</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;random_state&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;blobs&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">MinCovDet</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/MinCovDet-blobs-step0-timing.png"><img alt="_images/MinCovDet-blobs-step0-timing.png" src="_images/MinCovDet-blobs-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/MinCovDet-blobs-step0-memory.png"><img alt="_images/MinCovDet-blobs-step0-memory.png" src="_images/MinCovDet-blobs-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         11660 function calls in 0.755 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.755    0.755 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.755    0.755 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.755    0.755 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:567(fit)
     1    0.000    0.000    0.732    0.732 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:276(fast_mcd)
     2    0.002    0.001    0.732    0.366 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:160(select_candidates)
    40    0.156    0.004    0.709    0.018 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:28(c_step)
    85    0.010    0.000    0.259    0.003 /tmp/vb_sklearn/sklearn/utils/extmath.py:327(pinvh)
    85    0.191    0.002    0.204    0.002 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
   326    0.197    0.001    0.197    0.001 {numpy.core._dotblas.dot}
   115    0.001    0.000    0.109    0.001 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
   115    0.016    0.000    0.106    0.001 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
   144    0.001    0.000    0.053    0.000 /tmp/vb_sklearn/sklearn/utils/extmath.py:43(_fast_logdet_numpy)
   144    0.014    0.000    0.052    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/linalg/linalg.py:1560(slogdet)
   231    0.035    0.000    0.035    0.000 {method 'mean' of 'numpy.ndarray' objects}
   906    0.025    0.000    0.025    0.000 {numpy.core.multiarray.array}
   701    0.002    0.000    0.025    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
   144    0.021    0.000    0.021    0.000 {numpy.linalg.lapack_lite.dgetrf}
     1    0.001    0.001    0.019    0.019 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:639(reweight_covariance)
   171    0.011    0.000    0.016    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     1    0.000    0.000    0.016    0.016 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:99(_set_covariance)
    85    0.001    0.000    0.014    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
   229    0.014    0.000    0.014    0.000 {method 'get' of 'dict' objects}
   127    0.008    0.000    0.008    0.000 {method 'sum' of 'numpy.ndarray' objects}
   502    0.005    0.000    0.005    0.000 {method 'any' of 'numpy.ndarray' objects}
    40    0.002    0.000    0.005    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:1862(allclose)
    30    0.005    0.000    0.005    0.000 {method 'permutation' of 'mtrand.RandomState' objects}
    86    0.001    0.000    0.004    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
    86    0.000    0.000    0.004    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:598(argsort)
   144    0.001    0.000    0.003    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/linalg/linalg.py:139(_fastCopyAndTranspose)
    86    0.003    0.000    0.003    0.000 {method 'argsort' of 'numpy.ndarray' objects}
   432    0.003    0.000    0.003    0.000 {method 'reduce' of 'numpy.ufunc' objects}
   144    0.001    0.000    0.003    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:902(diagonal)
   144    0.003    0.000    0.003    0.000 {numpy.core.multiarray._fastCopyAndTranspose}
    86    0.001    0.000    0.002    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
   144    0.001    0.000    0.002    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/linalg/linalg.py:99(_commonType)
   250    0.002    0.000    0.002    0.000 {abs}
   259    0.001    0.000    0.001    0.000 {numpy.core.multiarray.zeros}
     2    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:453(isf)
     2    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:1521(isf)
   162    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1508(any)
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
   144    0.001    0.000    0.001    0.000 {method 'diagonal' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp_svd.py:92(svdvals)
     1    0.001    0.001    0.001    0.001 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp_svd.py:14(svd)
    44    0.000    0.000    0.001    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:283(check_random_state)
   144    0.001    0.000    0.001    0.000 {numpy.core.multiarray.arange}
    85    0.001    0.000    0.001    0.000 {method 'max' of 'numpy.ndarray' objects}
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:615(correct_covariance)
    96    0.000    0.000    0.001    0.000 {isinstance}
   689    0.001    0.000    0.001    0.000 {issubclass}
   144    0.001    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/linalg/linalg.py:127(_to_native_byte_order)
   144    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/linalg/linalg.py:157(_assertSquareness)
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
   115    0.001    0.000    0.001    0.000 {method 'astype' of 'numpy.ndarray' objects}
   144    0.001    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/linalg/linalg.py:151(_assertRank2)
    46    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/abc.py:128(__instancecheck__)
   288    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/linalg/linalg.py:71(isComplexType)
   224    0.001    0.000    0.001    0.000 {getattr}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:603(argsreduce)
    40    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1579(all)
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
    85    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
    85    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
   619    0.000    0.000    0.000    0.000 {len}
   174    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
   144    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/linalg/linalg.py:84(_realType)
    40    0.000    0.000    0.000    0.000 {method 'all' of 'numpy.ndarray' objects}
     6    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:32(_wrapit)
   115    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:592(valarray)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:1258(extract)
   365    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
   144    0.000    0.000    0.000    0.000 {max}
    90    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/_weakrefset.py:68(__contains__)
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
    88    0.000    0.000    0.000    0.000 {range}
   115    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}
    85    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1458(product)
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:86(array2d)
    16    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1044(ravel)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:2861(median)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/shape_base.py:6(atleast_1d)
    86    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
   144    0.000    0.000    0.000    0.000 {min}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:300(repeat)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:2543(_isf)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:490(sort)
     6    0.000    0.000    0.000    0.000 {map}
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:1173(_argcheck)
    10    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:45(take)
     6    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:1301(place)
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:23(_assert_all_finite)
    10    0.000    0.000    0.000    0.000 {method 'reshape' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1129(nonzero)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:1899(__call__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     6    0.000    0.000    0.000    0.000 {numpy.lib._compiled_base._insert}
     2    0.000    0.000    0.000    0.000 {zip}
     2    0.000    0.000    0.000    0.000 {method 'any' of 'numpy.generic' objects}
     2    0.000    0.000    0.000    0.000 {method 'prod' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     8    0.000    0.000    0.000    0.000 {method 'take' of 'numpy.ndarray' objects}
    16    0.000    0.000    0.000    0.000 {method 'ravel' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:1896(freeze)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:107(reshape)
     8    0.000    0.000    0.000    0.000 {method 'nonzero' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {method 'repeat' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:635(_fix_loc_scale)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1211(shape)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/stats/distributions.py:433(__init__)
     1    0.000    0.000    0.000    0.000 {method 'flatten' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:121(get_precision)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py
Function: fit at line 567
Total time: 0.842087 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   567                                               def fit(self, X, y=None):
   568                                                   """Fits a Minimum Covariance Determinant with the FastMCD algorithm.
   569
   570                                                   Parameters
   571                                                   ----------
   572                                                   X : array-like, shape = [n_samples, n_features]
   573                                                       Training data, where n_samples is the number of samples
   574                                                       and n_features is the number of features.
   575
   576                                                   y : not used, present for API consistence purpose.
   577
   578                                                   Returns
   579                                                   -------
   580                                                   self : object
   581                                                       Returns self.
   582
   583                                                   """
   584         1           38     38.0      0.0          random_state = check_random_state(self.random_state)
   585         1            5      5.0      0.0          n_samples, n_features = X.shape
   586                                                   # check that the empirical covariance is full rank
   587         1         1863   1863.0      0.2          if (linalg.svdvals(np.dot(X.T, X)) &gt; 1e-8).sum() != n_features:
   588                                                       warnings.warn("The covariance matrix associated to your dataset "
   589                                                                     "is not full rank")
   590                                                   # compute and store raw estimates
   591         1            3      3.0      0.0          raw_location, raw_covariance, raw_support, raw_dist = fast_mcd(
   592         1            3      3.0      0.0              X, support_fraction=self.support_fraction,
   593         1            3      3.0      0.0              cov_computation_method=self._nonrobust_covariance,
   594         1       831803 831803.0     98.8              random_state=random_state)
   595         1            4      4.0      0.0          if self.assume_centered:
   596                                                       raw_location = np.zeros(n_features)
   597                                                       raw_covariance = self._nonrobust_covariance(X[raw_support],
   598                                                                                                   assume_centered=True)
   599                                                       # get precision matrix in an optimized way
   600                                                       precision = pinvh(raw_covariance)
   601                                                       raw_dist = np.sum(np.dot(X, precision) * X, 1)
   602         1            4      4.0      0.0          self.raw_location_ = raw_location
   603         1            4      4.0      0.0          self.raw_covariance_ = raw_covariance
   604         1            4      4.0      0.0          self.raw_support_ = raw_support
   605         1            3      3.0      0.0          self.location_ = raw_location
   606         1            3      3.0      0.0          self.support_ = raw_support
   607         1            3      3.0      0.0          self.dist_ = raw_dist
   608                                                   # obtain consistency at normal models
   609         1         1515   1515.0      0.2          self.correct_covariance(X)
   610                                                   # re-weight estimator
   611         1         6825   6825.0      0.8          self.reweight_covariance(X)
   612
   613         1            4      4.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="shrunkcovariance-minimadelon">
<h2>ShrunkCovariance-minimadelon<a class="headerlink" href="#shrunkcovariance-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">ShrunkCovariance</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">ShrunkCovariance</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/ShrunkCovariance-minimadelon-step0-timing.png"><img alt="_images/ShrunkCovariance-minimadelon-step0-timing.png" src="_images/ShrunkCovariance-minimadelon-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/ShrunkCovariance-minimadelon-step0-memory.png"><img alt="_images/ShrunkCovariance-minimadelon-step0-memory.png" src="_images/ShrunkCovariance-minimadelon-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         98 function calls in 0.403 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.403    0.403 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.403    0.403 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.403    0.403 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:106(fit)
     1    0.000    0.000    0.389    0.389 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:99(_set_covariance)
     1    0.002    0.002    0.388    0.388 /tmp/vb_sklearn/sklearn/utils/extmath.py:327(pinvh)
     1    0.287    0.287    0.293    0.293 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     2    0.094    0.047    0.094    0.047 {numpy.core._dotblas.dot}
     1    0.000    0.000    0.013    0.013 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     1    0.006    0.006    0.013    0.013 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.001    0.001    0.002    0.002 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:28(shrunk_covariance)
     2    0.000    0.000    0.002    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:86(array2d)
     2    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:23(_assert_all_finite)
     2    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {method 'mean' of 'numpy.ndarray' objects}
    10    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     6    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     2    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 {len}
     4    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 106
Total time: 0.440492 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   106                                               def fit(self, X, y=None):
   107                                                   """ Fits the shrunk covariance model
   108                                                   according to the given training data and parameters.
   109
   110                                                   Parameters
   111                                                   ----------
   112                                                   X : array-like, shape = [n_samples, n_features]
   113                                                       Training data, where n_samples is the number of samples
   114                                                       and n_features is the number of features.
   115
   116                                                   y : not used, present for API consistence purpose.
   117
   118                                                   assume_centered : Boolean
   119                                                       If True, data are not centered before computation.
   120                                                       Useful to work with data whose mean is significantly equal to
   121                                                       zero but is not exactly zero.
   122                                                       If False, data are centered before computation.
   123
   124                                                   Returns
   125                                                   -------
   126                                                   self : object
   127                                                       Returns self.
   128
   129                                                   """
   130                                                   # Not calling the parent object to fit, to avoid a potential
   131                                                   # matrix inversion when setting the precision
   132         1            4      4.0      0.0          if self.assume_centered:
   133                                                       self.location_ = np.zeros(X.shape[1])
   134                                                   else:
   135         1          150    150.0      0.0              self.location_ = X.mean(0)
   136         1            3      3.0      0.0          covariance = empirical_covariance(
   137         1        10933  10933.0      2.5              X, assume_centered=self.assume_centered)
   138         1         1625   1625.0      0.4          covariance = shrunk_covariance(covariance, self.shrinkage)
   139         1       427774 427774.0     97.1          self._set_covariance(covariance)
   140
   141         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="shrunkcovariance-madelon">
<h2>ShrunkCovariance-madelon<a class="headerlink" href="#shrunkcovariance-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">ShrunkCovariance</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">ShrunkCovariance</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/ShrunkCovariance-madelon-step0-timing.png"><img alt="_images/ShrunkCovariance-madelon-step0-timing.png" src="_images/ShrunkCovariance-madelon-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/ShrunkCovariance-madelon-step0-memory.png"><img alt="_images/ShrunkCovariance-madelon-step0-memory.png" src="_images/ShrunkCovariance-madelon-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         98 function calls in 0.985 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.985    0.985 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.985    0.985 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.985    0.985 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:106(fit)
     1    0.000    0.000    0.522    0.522 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:99(_set_covariance)
     1    0.002    0.002    0.521    0.521 /tmp/vb_sklearn/sklearn/utils/extmath.py:327(pinvh)
     2    0.497    0.248    0.497    0.248 {numpy.core._dotblas.dot}
     1    0.000    0.000    0.432    0.432 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     1    0.009    0.009    0.432    0.432 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
     1    0.396    0.396    0.403    0.403 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     2    0.061    0.030    0.061    0.030 {method 'mean' of 'numpy.ndarray' objects}
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
    10    0.006    0.001    0.006    0.001 {numpy.core.multiarray.array}
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.001    0.001    0.002    0.002 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:28(shrunk_covariance)
     2    0.000    0.000    0.002    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:86(array2d)
     2    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:23(_assert_all_finite)
     2    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     6    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     2    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     3    0.000    0.000    0.000    0.000 {issubclass}
     8    0.000    0.000    0.000    0.000 {len}
     4    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 106
Total time: 1.03632 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   106                                               def fit(self, X, y=None):
   107                                                   """ Fits the shrunk covariance model
   108                                                   according to the given training data and parameters.
   109
   110                                                   Parameters
   111                                                   ----------
   112                                                   X : array-like, shape = [n_samples, n_features]
   113                                                       Training data, where n_samples is the number of samples
   114                                                       and n_features is the number of features.
   115
   116                                                   y : not used, present for API consistence purpose.
   117
   118                                                   assume_centered : Boolean
   119                                                       If True, data are not centered before computation.
   120                                                       Useful to work with data whose mean is significantly equal to
   121                                                       zero but is not exactly zero.
   122                                                       If False, data are centered before computation.
   123
   124                                                   Returns
   125                                                   -------
   126                                                   self : object
   127                                                       Returns self.
   128
   129                                                   """
   130                                                   # Not calling the parent object to fit, to avoid a potential
   131                                                   # matrix inversion when setting the precision
   132         1            4      4.0      0.0          if self.assume_centered:
   133                                                       self.location_ = np.zeros(X.shape[1])
   134                                                   else:
   135         1        42423  42423.0      4.1              self.location_ = X.mean(0)
   136         1            3      3.0      0.0          covariance = empirical_covariance(
   137         1       460317 460317.0     44.4              X, assume_centered=self.assume_centered)
   138         1         1641   1641.0      0.2          covariance = shrunk_covariance(covariance, self.shrinkage)
   139         1       531925 531925.0     51.3          self._set_covariance(covariance)
   140
   141         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="ledoitwolf-minimadelon">
<h2>LedoitWolf-minimadelon<a class="headerlink" href="#ledoitwolf-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">LedoitWolf</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">LedoitWolf</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/LedoitWolf-minimadelon-step0-timing.png"><img alt="_images/LedoitWolf-minimadelon-step0-timing.png" src="_images/LedoitWolf-minimadelon-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/LedoitWolf-minimadelon-step0-memory.png"><img alt="_images/LedoitWolf-minimadelon-step0-memory.png" src="_images/LedoitWolf-minimadelon-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         102 function calls in 0.418 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.418    0.418 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.418    0.418 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.418    0.418 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:370(fit)
     1    0.000    0.000    0.389    0.389 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:99(_set_covariance)
     1    0.002    0.002    0.388    0.388 /tmp/vb_sklearn/sklearn/utils/extmath.py:327(pinvh)
     1    0.287    0.287    0.293    0.293 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     4    0.105    0.026    0.105    0.026 {numpy.core._dotblas.dot}
     1    0.001    0.001    0.028    0.028 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:238(ledoit_wolf)
     1    0.002    0.002    0.016    0.016 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:147(ledoit_wolf_shrinkage)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     1    0.005    0.005    0.011    0.011 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     6    0.002    0.000    0.002    0.000 {method 'sum' of 'numpy.ndarray' objects}
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     5    0.000    0.000    0.002    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:86(array2d)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:23(_assert_all_finite)
     1    0.000    0.000    0.000    0.000 {method 'mean' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     9    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     6    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 {method 'sum' of 'numpy.generic' objects}
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     3    0.000    0.000    0.000    0.000 {issubclass}
     7    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {range}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 370
Total time: 0.444668 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   370                                               def fit(self, X, y=None):
   371                                                   """ Fits the Ledoit-Wolf shrunk covariance model
   372                                                   according to the given training data and parameters.
   373
   374                                                   Parameters
   375                                                   ----------
   376                                                   X : array-like, shape = [n_samples, n_features]
   377                                                       Training data, where n_samples is the number of samples
   378                                                       and n_features is the number of features.
   379                                                   y : not used, present for API consistence purpose.
   380
   381                                                   Returns
   382                                                   -------
   383                                                   self : object
   384                                                       Returns self.
   385
   386                                                   """
   387                                                   # Not calling the parent object to fit, to avoid computing the
   388                                                   # covariance matrix (and potentially the precision)
   389         1            4      4.0      0.0          if self.assume_centered:
   390                                                       self.location_ = np.zeros(X.shape[1])
   391                                                   else:
   392         1          146    146.0      0.0              self.location_ = X.mean(0)
   393         1           87     87.0      0.0          covariance, shrinkage = ledoit_wolf(X - self.location_,
   394         1            2      2.0      0.0                                              assume_centered=True,
   395         1        25478  25478.0      5.7                                              block_size=self.block_size)
   396         1            5      5.0      0.0          self.shrinkage_ = shrinkage
   397         1       418943 418943.0     94.2          self._set_covariance(covariance)
   398
   399         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="ledoitwolf-madelon">
<h2>LedoitWolf-madelon<a class="headerlink" href="#ledoitwolf-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">LedoitWolf</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">LedoitWolf</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/LedoitWolf-madelon-step0-timing.png"><img alt="_images/LedoitWolf-madelon-step0-timing.png" src="_images/LedoitWolf-madelon-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/LedoitWolf-madelon-step0-memory.png"><img alt="_images/LedoitWolf-madelon-step0-memory.png" src="_images/LedoitWolf-madelon-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         102 function calls in 1.830 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    1.830    1.830 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    1.830    1.830 &lt;f&gt;:1(&lt;module&gt;)
     1    0.008    0.008    1.830    1.830 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:370(fit)
     4    1.320    0.330    1.320    0.330 {numpy.core._dotblas.dot}
     1    0.001    0.001    1.268    1.268 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:238(ledoit_wolf)
     1    0.008    0.008    0.841    0.841 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:147(ledoit_wolf_shrinkage)
     1    0.000    0.000    0.523    0.523 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:99(_set_covariance)
     1    0.002    0.002    0.522    0.522 /tmp/vb_sklearn/sklearn/utils/extmath.py:327(pinvh)
     1    0.005    0.005    0.426    0.426 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     1    0.411    0.411    0.417    0.417 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     6    0.032    0.005    0.032    0.005 {method 'sum' of 'numpy.ndarray' objects}
     5    0.000    0.000    0.032    0.006 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
     1    0.031    0.031    0.031    0.031 {method 'mean' of 'numpy.ndarray' objects}
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:86(array2d)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:23(_assert_all_finite)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     6    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     9    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'sum' of 'numpy.generic' objects}
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     7    0.000    0.000    0.000    0.000 {len}
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {range}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 370
Total time: 1.92464 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   370                                               def fit(self, X, y=None):
   371                                                   """ Fits the Ledoit-Wolf shrunk covariance model
   372                                                   according to the given training data and parameters.
   373
   374                                                   Parameters
   375                                                   ----------
   376                                                   X : array-like, shape = [n_samples, n_features]
   377                                                       Training data, where n_samples is the number of samples
   378                                                       and n_features is the number of features.
   379                                                   y : not used, present for API consistence purpose.
   380
   381                                                   Returns
   382                                                   -------
   383                                                   self : object
   384                                                       Returns self.
   385
   386                                                   """
   387                                                   # Not calling the parent object to fit, to avoid computing the
   388                                                   # covariance matrix (and potentially the precision)
   389         1            4      4.0      0.0          if self.assume_centered:
   390                                                       self.location_ = np.zeros(X.shape[1])
   391                                                   else:
   392         1        30029  30029.0      1.6              self.location_ = X.mean(0)
   393         1         4081   4081.0      0.2          covariance, shrinkage = ledoit_wolf(X - self.location_,
   394         1            3      3.0      0.0                                              assume_centered=True,
   395         1      1369939 1369939.0     71.2                                              block_size=self.block_size)
   396         1            6      6.0      0.0          self.shrinkage_ = shrinkage
   397         1       520570 520570.0     27.0          self._set_covariance(covariance)
   398
   399         1            4      4.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="oas-minimadelon">
<h2>OAS-minimadelon<a class="headerlink" href="#oas-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">OAS</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">OAS</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/OAS-minimadelon-step0-timing.png"><img alt="_images/OAS-minimadelon-step0-timing.png" src="_images/OAS-minimadelon-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/OAS-minimadelon-step0-memory.png"><img alt="_images/OAS-minimadelon-step0-memory.png" src="_images/OAS-minimadelon-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         82 function calls in 0.405 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.405    0.405 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.405    0.405 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.405    0.405 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:524(fit)
     1    0.000    0.000    0.390    0.390 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:99(_set_covariance)
     1    0.002    0.002    0.389    0.389 /tmp/vb_sklearn/sklearn/utils/extmath.py:327(pinvh)
     1    0.287    0.287    0.294    0.294 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     2    0.094    0.047    0.094    0.047 {numpy.core._dotblas.dot}
     1    0.002    0.002    0.015    0.015 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:405(oas)
     1    0.006    0.006    0.012    0.012 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:86(array2d)
     2    0.001    0.000    0.001    0.000 {method 'mean' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:23(_assert_all_finite)
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     1    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     2    0.000    0.000    0.000    0.000 {abs}
     8    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     3    0.000    0.000    0.000    0.000 {issubclass}
     6    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {isinstance}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 524
Total time: 0.43957 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   524                                               def fit(self, X, y=None):
   525                                                   """ Fits the Oracle Approximating Shrinkage covariance model
   526                                                   according to the given training data and parameters.
   527
   528                                                   Parameters
   529                                                   ----------
   530                                                   X : array-like, shape = [n_samples, n_features]
   531                                                       Training data, where n_samples is the number of samples
   532                                                       and n_features is the number of features.
   533                                                   y : not used, present for API consistence purpose.
   534
   535                                                   Returns
   536                                                   -------
   537                                                   self: object
   538                                                       Returns self.
   539
   540                                                   """
   541                                                   # Not calling the parent object to fit, to avoid computing the
   542                                                   # covariance matrix (and potentially the precision)
   543         1            4      4.0      0.0          if self.assume_centered:
   544                                                       self.location_ = np.zeros(X.shape[1])
   545                                                   else:
   546         1          146    146.0      0.0              self.location_ = X.mean(0)
   547
   548         1        12987  12987.0      3.0          covariance, shrinkage = oas(X - self.location_, assume_centered=True)
   549         1            5      5.0      0.0          self.shrinkage_ = shrinkage
   550         1       426425 426425.0     97.0          self._set_covariance(covariance)
   551
   552         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="oas-madelon">
<h2>OAS-madelon<a class="headerlink" href="#oas-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">OAS</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">OAS</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<a class="reference internal image-reference" href="_images/OAS-madelon-step0-timing.png"><img alt="_images/OAS-madelon-step0-timing.png" src="_images/OAS-madelon-step0-timing.png" style="width: 6in;" /></a>
<p><strong>Memory usage</strong></p>
<a class="reference internal image-reference" href="_images/OAS-madelon-step0-memory.png"><img alt="_images/OAS-madelon-step0-memory.png" src="_images/OAS-madelon-step0-memory.png" style="width: 6in;" /></a>
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         82 function calls in 0.935 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.935    0.935 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.935    0.935 &lt;f&gt;:1(&lt;module&gt;)
     1    0.008    0.008    0.935    0.935 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:524(fit)
     1    0.000    0.000    0.521    0.521 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:99(_set_covariance)
     1    0.002    0.002    0.520    0.520 /tmp/vb_sklearn/sklearn/utils/extmath.py:327(pinvh)
     2    0.478    0.239    0.478    0.239 {numpy.core._dotblas.dot}
     1    0.396    0.396    0.402    0.402 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     1    0.002    0.002    0.376    0.376 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:405(oas)
     1    0.005    0.005    0.373    0.373 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     2    0.032    0.016    0.032    0.016 {method 'mean' of 'numpy.ndarray' objects}
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:86(array2d)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:23(_assert_all_finite)
     1    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     6    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 524
Total time: 1.00891 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   524                                               def fit(self, X, y=None):
   525                                                   """ Fits the Oracle Approximating Shrinkage covariance model
   526                                                   according to the given training data and parameters.
   527
   528                                                   Parameters
   529                                                   ----------
   530                                                   X : array-like, shape = [n_samples, n_features]
   531                                                       Training data, where n_samples is the number of samples
   532                                                       and n_features is the number of features.
   533                                                   y : not used, present for API consistence purpose.
   534
   535                                                   Returns
   536                                                   -------
   537                                                   self: object
   538                                                       Returns self.
   539
   540                                                   """
   541                                                   # Not calling the parent object to fit, to avoid computing the
   542                                                   # covariance matrix (and potentially the precision)
   543         1            4      4.0      0.0          if self.assume_centered:
   544                                                       self.location_ = np.zeros(X.shape[1])
   545                                                   else:
   546         1        38929  38929.0      3.9              self.location_ = X.mean(0)
   547
   548         1       425627 425627.0     42.2          covariance, shrinkage = oas(X - self.location_, assume_centered=True)
   549         1            7      7.0      0.0          self.shrinkage_ = shrinkage
   550         1       544339 544339.0     54.0          self._set_covariance(covariance)
   551
   552         1            4      4.0      0.0          return self</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>

        <div class="clearer"></div>
      </div>
    </div>
  

    <div class="footer">
        &copy; .
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b1. Design by <a href="http://desgrana.es">Desgrana</a>.
    <span style="padding-left: 5ex;">
    <a href="_sources/vb_covariance.txt"
	    rel="nofollow">Show this page source</a>
    </span>
    </div>
     <div class="rel rellarge">
    
    <div class="buttonPrevious">
      <a href="vb_cluster.html">
        Previous
      </a>  
    </div>
    <div class="buttonNext">
      <a href="vb_decomposition.html">
        Next
      </a>  
    </div>
    
     </div>
     <script type="text/javascript">
       $("div.buttonNext, div.buttonPrevious").hover(
           function () {
               $(this).css('background-color', '#FF9C34');
           },
           function () {
               $(this).css('background-color', '#A7D6E2');
           }
       );
     </script>
  </body>
</html>
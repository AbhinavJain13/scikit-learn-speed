

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Benchmarks for covariance &mdash; Vbench performance benchmarks for scikit-learn</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.12-git',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Vbench performance benchmarks for scikit-learn" href="index.html" />
    <link rel="next" title="Benchmarks for decomposition" href="vb_decomposition.html" />
    <link rel="prev" title="Benchmarks for cluster" href="vb_cluster.html" />

  <!-- Reference the theme's stylesheet on the Google CDN -->
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/excite-bike/jquery-ui.css"
        type="text/css" rel="Stylesheet" />
 
  <!-- Reference jQuery and jQuery UI from the CDN. Remember
       that the order of these two elements is important -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>

<script type="text/javascript">
      $(function(){
        $(".profiler-output").accordion({collapsible: true, header: "p", active: false} );
      });
    </script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22606712-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>

    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="http://scikit-learn.org/">
            <img src="_static/scikit-learn-logo-small.png" alt="Logo"/>
          </a>
          </p><div class="navbar">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="quick_start.html">Speed Quick Start</a></li>
            <li><a href="http://scikit-learn.org/dev/user_guide.html">User's Guide</a></li>
            <li><a href="http://scikit-learn.org/dev/developers/performance.html">Performance</a></li>
            <li><a href="http://github.com/scikit-learn/scikit-learn">Github</a></li>
            <li><a href="http://github.com/vene/scikit-learn-speed">Speed Github</a></li>
       </ul>
</div>
<!-- end navbar --></div>
    </div>

    <div class="content-wrapper">

      <div class="sphinxsidebar">
	<div class="sphinxsidebarwrapper">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="vb_cluster.html">Benchmarks for cluster</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Benchmarks for covariance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#graphlasso-minimadelon">GraphLasso-minimadelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#graphlasso-madelon">GraphLasso-madelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mincovdet-blobs">MinCovDet-blobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shrunkcovariance-minimadelon">ShrunkCovariance-minimadelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shrunkcovariance-madelon">ShrunkCovariance-madelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ledoitwolf-minimadelon">LedoitWolf-minimadelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ledoitwolf-madelon">LedoitWolf-madelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oas-minimadelon">OAS-minimadelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oas-madelon">OAS-madelon</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vb_decomposition.html">Benchmarks for decomposition</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_ensemble.html">Benchmarks for ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_gaussian_process.html">Benchmarks for gaussian_process</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_linear_model.html">Benchmarks for linear_model</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_manifold.html">Benchmarks for manifold</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_mixture.html">Benchmarks for mixture</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_naive_bayes.html">Benchmarks for naive_bayes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_neighbors.html">Benchmarks for neighbors</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_pls.html">Benchmarks for pls</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_semi_supervised.html">Benchmarks for semi_supervised</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_svm.html">Benchmarks for svm</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_tree.html">Benchmarks for tree</a></li>
</ul>

          <!--
	   <div class="rel rellarge">
	     
	<!-- rellinks[1:] is an ugly hack to avoid link to module
	    index  --
	<div class="rellink">
	<a href="vb_cluster.html" title="Benchmarks for cluster"
	    accesskey="P">Previous
	    <br>
	    <span class="smallrellink">
	    Benchmarks for c...
	    </span>
	    <span class="hiddenrellink">
	    Benchmarks for cluster
	    </span>
	    
	    </a>
	</div>
	    <div class="spacer">
	    &nbsp;
	    </div>
	
	<div class="rellink">
	<a href="vb_decomposition.html" title="Benchmarks for decomposition"
	    accesskey="N">Next
	    <br>
	    <span class="smallrellink">
	    Benchmarks for d...
	    </span>
	    <span class="hiddenrellink">
	    Benchmarks for decomposition
	    </span>
	    
	    </a>
	</div>
	<!-- Ad a link to the 'up' page --
    </div>
    <p style="text-align: center; background-color: #FFE4E4">This documentation is
    for scikit-learn <strong>version 0.12-git</strong>
    &mdash; <a href="http://scikit-learn.org/stable/support.html#documentation-resources">Other versions</a></p>
    
    <h3>Citing</h3>
    <p>If you use the software, please consider
    <a href="about.html#citing-scikit-learn">citing scikit-learn</a>.</p>
    <h3>This page</h3>
	<ul>
<li><a class="reference internal" href="#">Benchmarks for covariance</a><ul>
<li><a class="reference internal" href="#graphlasso-minimadelon">GraphLasso-minimadelon</a></li>
<li><a class="reference internal" href="#graphlasso-madelon">GraphLasso-madelon</a></li>
<li><a class="reference internal" href="#mincovdet-blobs">MinCovDet-blobs</a></li>
<li><a class="reference internal" href="#shrunkcovariance-minimadelon">ShrunkCovariance-minimadelon</a></li>
<li><a class="reference internal" href="#shrunkcovariance-madelon">ShrunkCovariance-madelon</a></li>
<li><a class="reference internal" href="#ledoitwolf-minimadelon">LedoitWolf-minimadelon</a></li>
<li><a class="reference internal" href="#ledoitwolf-madelon">LedoitWolf-madelon</a></li>
<li><a class="reference internal" href="#oas-minimadelon">OAS-minimadelon</a></li>
<li><a class="reference internal" href="#oas-madelon">OAS-madelon</a></li>
</ul>
</li>
</ul>

    
  -->
    </div>
	  </div>


      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="benchmarks-for-covariance">
<h1>Benchmarks for covariance<a class="headerlink" href="#benchmarks-for-covariance" title="Permalink to this headline">¶</a></h1>
<div class="section" id="graphlasso-minimadelon">
<h2>GraphLasso-minimadelon<a class="headerlink" href="#graphlasso-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">GraphLasso</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">GraphLasso</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/GraphLasso-minimadelon-step0-timing.png" src="_images/GraphLasso-minimadelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/GraphLasso-minimadelon-step0-memory.png" src="_images/GraphLasso-minimadelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>Traceback</p>
<div class="highlight-python"><pre>   Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 150, in run
    exec step in ns
  File "&lt;string&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 260, in run
    mem_usages = magic_memit(ns, self.code, repeat=self.mem_repeat)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 672, in magic_memit
    raise RuntimeError('ERROR: all subprocesses exited unsuccessfully.'
RuntimeError: ERROR: all subprocesses exited unsuccessfully. Try again with the `-i` option.
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 293, in run
    prof.runcall(f)
  File "/sp/lib/python/cpython-2.7.2/lib/python2.7/cProfile.py", line 149, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 288, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 351, in run
    prof.runcall(f)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/line_profiler.py", line 137, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 348, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver</pre>
</div>
</div>
</div>
<div class="section" id="graphlasso-madelon">
<h2>GraphLasso-madelon<a class="headerlink" href="#graphlasso-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">GraphLasso</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">GraphLasso</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/GraphLasso-madelon-step0-timing.png" src="_images/GraphLasso-madelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/GraphLasso-madelon-step0-memory.png" src="_images/GraphLasso-madelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>Traceback</p>
<div class="highlight-python"><pre>   Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 150, in run
    exec step in ns
  File "&lt;string&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 260, in run
    mem_usages = magic_memit(ns, self.code, repeat=self.mem_repeat)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 672, in magic_memit
    raise RuntimeError('ERROR: all subprocesses exited unsuccessfully.'
RuntimeError: ERROR: all subprocesses exited unsuccessfully. Try again with the `-i` option.
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 293, in run
    prof.runcall(f)
  File "/sp/lib/python/cpython-2.7.2/lib/python2.7/cProfile.py", line 149, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 288, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 351, in run
    prof.runcall(f)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/line_profiler.py", line 137, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 348, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver</pre>
</div>
</div>
</div>
<div class="section" id="mincovdet-blobs">
<h2>MinCovDet-blobs<a class="headerlink" href="#mincovdet-blobs" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">MinCovDet</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;random_state&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;blobs&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">MinCovDet</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/MinCovDet-blobs-step0-timing.png" src="_images/MinCovDet-blobs-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/MinCovDet-blobs-step0-memory.png" src="_images/MinCovDet-blobs-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         11660 function calls in 0.702 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.702    0.702 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.702    0.702 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.702    0.702 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:546(fit)
     1    0.000    0.000    0.691    0.691 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:262(fast_mcd)
     2    0.002    0.001    0.691    0.345 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:154(select_candidates)
    40    0.152    0.004    0.665    0.017 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:28(c_step)
    85    0.011    0.000    0.223    0.003 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
   326    0.184    0.001    0.184    0.001 {numpy.core._dotblas.dot}
    85    0.164    0.002    0.177    0.002 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
   115    0.001    0.000    0.108    0.001 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
   115    0.030    0.000    0.105    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
   144    0.002    0.000    0.059    0.000 /tmp/vb_sklearn/sklearn/utils/extmath.py:39(_fast_logdet_numpy)
   144    0.015    0.000    0.058    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:1560(slogdet)
   906    0.028    0.000    0.028    0.000 {numpy.core.multiarray.array}
   700    0.002    0.000    0.028    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
   144    0.024    0.000    0.024    0.000 {numpy.linalg.lapack_lite.dgetrf}
   171    0.012    0.000    0.017    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
   231    0.013    0.000    0.013    0.000 {method 'mean' of 'numpy.ndarray' objects}
   127    0.009    0.000    0.009    0.000 {method 'sum' of 'numpy.ndarray' objects}
     1    0.002    0.002    0.007    0.007 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:617(reweight_covariance)
   502    0.006    0.000    0.006    0.000 {method 'any' of 'numpy.ndarray' objects}
    30    0.005    0.000    0.005    0.000 {method 'permutation' of 'mtrand.RandomState' objects}
    40    0.003    0.000    0.005    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:1862(allclose)
    86    0.001    0.000    0.004    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
    86    0.000    0.000    0.004    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:598(argsort)
   144    0.001    0.000    0.004    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:139(_fastCopyAndTranspose)
    86    0.004    0.000    0.004    0.000 {method 'argsort' of 'numpy.ndarray' objects}
   432    0.003    0.000    0.003    0.000 {method 'reduce' of 'numpy.ufunc' objects}
   144    0.001    0.000    0.003    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:902(diagonal)
   144    0.003    0.000    0.003    0.000 {numpy.core.multiarray._fastCopyAndTranspose}
     1    0.000    0.000    0.003    0.003 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
   144    0.001    0.000    0.002    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:99(_commonType)
   250    0.002    0.000    0.002    0.000 {abs}
    86    0.001    0.000    0.002    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
   144    0.002    0.000    0.002    0.000 {method 'diagonal' of 'numpy.ndarray' objects}
   259    0.002    0.000    0.002    0.000 {numpy.core.multiarray.zeros}
     2    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:453(isf)
     2    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:1521(isf)
   162    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1508(any)
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp_svd.py:92(svdvals)
     1    0.001    0.001    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp_svd.py:14(svd)
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
    44    0.000    0.000    0.001    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:233(check_random_state)
   144    0.001    0.000    0.001    0.000 {numpy.core.multiarray.arange}
    85    0.001    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
    85    0.001    0.000    0.001    0.000 {method 'max' of 'numpy.ndarray' objects}
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:593(correct_covariance)
    96    0.000    0.000    0.001    0.000 {isinstance}
   144    0.001    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:127(_to_native_byte_order)
   689    0.001    0.000    0.001    0.000 {issubclass}
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
   115    0.001    0.000    0.001    0.000 {method 'astype' of 'numpy.ndarray' objects}
   144    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:157(_assertSquareness)
    46    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/abc.py:128(__instancecheck__)
   144    0.001    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:151(_assertRank2)
   229    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}
   288    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:71(isComplexType)
     2    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:603(argsreduce)
   224    0.001    0.000    0.001    0.000 {getattr}
    40    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1579(all)
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
    85    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
    85    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
   115    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
   144    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:84(_realType)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1258(extract)
     6    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:32(_wrapit)
    40    0.000    0.000    0.000    0.000 {method 'all' of 'numpy.ndarray' objects}
   174    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
   365    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
   619    0.000    0.000    0.000    0.000 {len}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:592(valarray)
   144    0.000    0.000    0.000    0.000 {max}
    90    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/_weakrefset.py:68(__contains__)
    16    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1044(ravel)
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
   115    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}
    88    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1458(product)
    85    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:2861(median)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:6(atleast_1d)
    86    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
   144    0.000    0.000    0.000    0.000 {min}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:300(repeat)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:2543(_isf)
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     6    0.000    0.000    0.000    0.000 {map}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:490(sort)
    11    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:1173(_argcheck)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     6    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1301(place)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:45(take)
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'numpy.ndarray' objects}
    10    0.000    0.000    0.000    0.000 {method 'reshape' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:1899(__call__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1129(nonzero)
     2    0.000    0.000    0.000    0.000 {zip}
     6    0.000    0.000    0.000    0.000 {numpy.lib._compiled_base._insert}
     2    0.000    0.000    0.000    0.000 {method 'any' of 'numpy.generic' objects}
    16    0.000    0.000    0.000    0.000 {method 'ravel' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 {method 'take' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {method 'prod' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:1896(freeze)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     2    0.000    0.000    0.000    0.000 {method 'repeat' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 {method 'nonzero' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:107(reshape)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:635(_fix_loc_scale)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:433(__init__)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1211(shape)
     1    0.000    0.000    0.000    0.000 {method 'flatten' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:120(get_precision)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py
Function: fit at line 546
Total time: 0.836609 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   546                                               def fit(self, X, y=None):
   547                                                   """Fits a Minimum Covariance Determinant with the FastMCD algorithm.
   548
   549                                                   Parameters
   550                                                   ----------
   551                                                   X: array-like, shape = [n_samples, n_features]
   552                                                     Training data, where n_samples is the number of samples
   553                                                     and n_features is the number of features.
   554                                                   y: not used, present for API consistence purpose.
   555
   556                                                   Returns
   557                                                   -------
   558                                                   self: object
   559                                                     Returns self.
   560
   561                                                   """
   562         1           52     52.0      0.0          random_state = check_random_state(self.random_state)
   563         1            5      5.0      0.0          n_samples, n_features = X.shape
   564                                                   # check that the empirical covariance is full rank
   565         1         2074   2074.0      0.2          if (linalg.svdvals(np.dot(X.T, X)) &gt; 1e-8).sum() != n_features:
   566                                                       warnings.warn("The covariance matrix associated to your dataset "
   567                                                                     "is not full rank")
   568                                                   # compute and store raw estimates
   569         1            4      4.0      0.0          raw_location, raw_covariance, raw_support, raw_dist = fast_mcd(
   570         1            3      3.0      0.0              X, support_fraction=self.support_fraction,
   571         1            3      3.0      0.0              cov_computation_method=self._nonrobust_covariance,
   572         1       826588 826588.0     98.8              random_state=random_state)
   573         1            5      5.0      0.0          if self.assume_centered:
   574                                                       raw_location = np.zeros(n_features)
   575                                                       raw_covariance = self._nonrobust_covariance(X[raw_support],
   576                                                                                                   assume_centered=True)
   577                                                       # get precision matrix in an optimized way
   578                                                       precision = pinvh(raw_covariance)
   579                                                       raw_dist = np.sum(np.dot(X, precision) * X, 1)
   580         1            4      4.0      0.0          self.raw_location_ = raw_location
   581         1            5      5.0      0.0          self.raw_covariance_ = raw_covariance
   582         1            3      3.0      0.0          self.raw_support_ = raw_support
   583         1            3      3.0      0.0          self.location_ = raw_location
   584         1            3      3.0      0.0          self.support_ = raw_support
   585         1            3      3.0      0.0          self.dist_ = raw_dist
   586                                                   # obtain consistency at normal models
   587         1         1198   1198.0      0.1          self.correct_covariance(X)
   588                                                   # reweight estimator
   589         1         6652   6652.0      0.8          self.reweight_covariance(X)
   590
   591         1            4      4.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="shrunkcovariance-minimadelon">
<h2>ShrunkCovariance-minimadelon<a class="headerlink" href="#shrunkcovariance-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">ShrunkCovariance</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">ShrunkCovariance</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/ShrunkCovariance-minimadelon-step0-timing.png" src="_images/ShrunkCovariance-minimadelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/ShrunkCovariance-minimadelon-step0-memory.png" src="_images/ShrunkCovariance-minimadelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         98 function calls in 0.404 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.404    0.404 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.404    0.404 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.404    0.404 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:105(fit)
     1    0.000    0.000    0.390    0.390 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.389    0.389 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     1    0.287    0.287    0.293    0.293 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     2    0.094    0.047    0.094    0.047 {numpy.core._dotblas.dot}
     1    0.000    0.000    0.013    0.013 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     1    0.006    0.006    0.013    0.013 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.001    0.001    0.002    0.002 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:27(shrunk_covariance)
     2    0.000    0.000    0.002    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     2    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     2    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {method 'mean' of 'numpy.ndarray' objects}
    10    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     6    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     2    0.000    0.000    0.000    0.000 {isinstance}
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 {range}
     4    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     8    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
     1    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 105
Total time: 0.391455 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   105                                               def fit(self, X, y=None):
   106                                                   """ Fits the shrunk covariance model
   107                                                   according to the given training data and parameters.
   108
   109                                                   Parameters
   110                                                   ----------
   111                                                   X: array-like, shape = [n_samples, n_features]
   112                                                     Training data, where n_samples is the number of samples
   113                                                     and n_features is the number of features.
   114                                                   y: not used, present for API consistence purpose.
   115
   116                                                   assume_centered: Boolean
   117                                                     If True, data are not centered before computation.
   118                                                     Useful to work with data whose mean is significantly equal to
   119                                                     zero but is not exactly zero.
   120                                                     If False, data are centered before computation.
   121
   122                                                   Returns
   123                                                   -------
   124                                                   self: object
   125                                                     Returns self.
   126
   127                                                   """
   128                                                   # Not calling the parent object to fit, to avoid a potential
   129                                                   # matrix inversion when setting the precision
   130         1            4      4.0      0.0          if self.assume_centered:
   131                                                       self.location_ = np.zeros(X.shape[1])
   132                                                   else:
   133         1          146    146.0      0.0              self.location_ = X.mean(0)
   134         1            2      2.0      0.0          covariance = empirical_covariance(
   135         1        10900  10900.0      2.8              X, assume_centered=self.assume_centered)
   136         1         1607   1607.0      0.4          covariance = shrunk_covariance(covariance, self.shrinkage)
   137         1       378794 378794.0     96.8          self._set_covariance(covariance)
   138
   139         1            2      2.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="shrunkcovariance-madelon">
<h2>ShrunkCovariance-madelon<a class="headerlink" href="#shrunkcovariance-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">ShrunkCovariance</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">ShrunkCovariance</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/ShrunkCovariance-madelon-step0-timing.png" src="_images/ShrunkCovariance-madelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/ShrunkCovariance-madelon-step0-memory.png" src="_images/ShrunkCovariance-madelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         98 function calls in 0.958 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.958    0.958 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.958    0.958 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.958    0.958 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:105(fit)
     1    0.000    0.000    0.513    0.513 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.512    0.512 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     2    0.476    0.238    0.476    0.238 {numpy.core._dotblas.dot}
     1    0.000    0.000    0.413    0.413 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     1    0.009    0.009    0.413    0.413 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
     1    0.390    0.390    0.396    0.396 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     2    0.061    0.030    0.061    0.030 {method 'mean' of 'numpy.ndarray' objects}
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
    10    0.005    0.001    0.005    0.001 {numpy.core.multiarray.array}
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.001    0.001    0.002    0.002 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:27(shrunk_covariance)
     2    0.000    0.000    0.002    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     2    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     2    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     6    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     2    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     1    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
     3    0.000    0.000    0.000    0.000 {issubclass}
     8    0.000    0.000    0.000    0.000 {len}
     4    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 105
Total time: 1.0389 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   105                                               def fit(self, X, y=None):
   106                                                   """ Fits the shrunk covariance model
   107                                                   according to the given training data and parameters.
   108
   109                                                   Parameters
   110                                                   ----------
   111                                                   X: array-like, shape = [n_samples, n_features]
   112                                                     Training data, where n_samples is the number of samples
   113                                                     and n_features is the number of features.
   114                                                   y: not used, present for API consistence purpose.
   115
   116                                                   assume_centered: Boolean
   117                                                     If True, data are not centered before computation.
   118                                                     Useful to work with data whose mean is significantly equal to
   119                                                     zero but is not exactly zero.
   120                                                     If False, data are centered before computation.
   121
   122                                                   Returns
   123                                                   -------
   124                                                   self: object
   125                                                     Returns self.
   126
   127                                                   """
   128                                                   # Not calling the parent object to fit, to avoid a potential
   129                                                   # matrix inversion when setting the precision
   130         1            4      4.0      0.0          if self.assume_centered:
   131                                                       self.location_ = np.zeros(X.shape[1])
   132                                                   else:
   133         1        41268  41268.0      4.0              self.location_ = X.mean(0)
   134         1            3      3.0      0.0          covariance = empirical_covariance(
   135         1       474141 474141.0     45.6              X, assume_centered=self.assume_centered)
   136         1         1628   1628.0      0.2          covariance = shrunk_covariance(covariance, self.shrinkage)
   137         1       521851 521851.0     50.2          self._set_covariance(covariance)
   138
   139         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="ledoitwolf-minimadelon">
<h2>LedoitWolf-minimadelon<a class="headerlink" href="#ledoitwolf-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">LedoitWolf</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">LedoitWolf</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/LedoitWolf-minimadelon-step0-timing.png" src="_images/LedoitWolf-minimadelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/LedoitWolf-minimadelon-step0-memory.png" src="_images/LedoitWolf-minimadelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         102 function calls in 0.416 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.416    0.416 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.416    0.416 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.416    0.416 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:366(fit)
     1    0.000    0.000    0.388    0.388 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.387    0.387 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     1    0.286    0.286    0.292    0.292 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     4    0.105    0.026    0.105    0.026 {numpy.core._dotblas.dot}
     1    0.001    0.001    0.027    0.027 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:236(ledoit_wolf)
     1    0.002    0.002    0.016    0.016 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:145(ledoit_wolf_shrinkage)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     1    0.005    0.005    0.010    0.010 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     6    0.002    0.000    0.002    0.000 {method 'sum' of 'numpy.ndarray' objects}
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     5    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.000    0.000    0.000    0.000 {method 'mean' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     2    0.000    0.000    0.000    0.000 {abs}
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     9    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     6    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'sum' of 'numpy.generic' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     2    0.000    0.000    0.000    0.000 {getattr}
     7    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     3    0.000    0.000    0.000    0.000 {issubclass}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 366
Total time: 0.455015 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   366                                               def fit(self, X, y=None):
   367                                                   """ Fits the Ledoit-Wolf shrunk covariance model
   368                                                   according to the given training data and parameters.
   369
   370                                                   Parameters
   371                                                   ----------
   372                                                   X: array-like, shape = [n_samples, n_features]
   373                                                     Training data, where n_samples is the number of samples
   374                                                     and n_features is the number of features.
   375                                                   y: not used, present for API consistence purpose.
   376
   377                                                   Returns
   378                                                   -------
   379                                                   self: object
   380                                                     Returns self.
   381
   382                                                   """
   383                                                   # Not calling the parent object to fit, to avoid computing the
   384                                                   # covariance matrix (and potentially the precision)
   385         1            4      4.0      0.0          if self.assume_centered:
   386                                                       self.location_ = np.zeros(X.shape[1])
   387                                                   else:
   388         1          146    146.0      0.0              self.location_ = X.mean(0)
   389         1          152    152.0      0.0          covariance, shrinkage = ledoit_wolf(X - self.location_,
   390         1            3      3.0      0.0                                              assume_centered=True,
   391         1        26226  26226.0      5.8                                              block_size=self.block_size)
   392         1            5      5.0      0.0          self.shrinkage_ = shrinkage
   393         1       428476 428476.0     94.2          self._set_covariance(covariance)
   394
   395         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="ledoitwolf-madelon">
<h2>LedoitWolf-madelon<a class="headerlink" href="#ledoitwolf-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">LedoitWolf</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">LedoitWolf</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/LedoitWolf-madelon-step0-timing.png" src="_images/LedoitWolf-madelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/LedoitWolf-madelon-step0-memory.png" src="_images/LedoitWolf-madelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         102 function calls in 1.844 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    1.844    1.844 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    1.844    1.844 &lt;f&gt;:1(&lt;module&gt;)
     1    0.008    0.008    1.844    1.844 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:366(fit)
     4    1.312    0.328    1.312    0.328 {numpy.core._dotblas.dot}
     1    0.001    0.001    1.259    1.259 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:236(ledoit_wolf)
     1    0.007    0.007    0.824    0.824 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:145(ledoit_wolf_shrinkage)
     1    0.000    0.000    0.548    0.548 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.547    0.547 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     1    0.443    0.443    0.446    0.446 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     1    0.003    0.003    0.434    0.434 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     6    0.032    0.005    0.032    0.005 {method 'sum' of 'numpy.ndarray' objects}
     5    0.000    0.000    0.032    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
     1    0.030    0.030    0.030    0.030 {method 'mean' of 'numpy.ndarray' objects}
     2    0.006    0.003    0.007    0.003 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.001    0.000    0.001    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     6    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     9    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'sum' of 'numpy.generic' objects}
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     7    0.000    0.000    0.000    0.000 {len}
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 {range}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 366
Total time: 1.91154 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   366                                               def fit(self, X, y=None):
   367                                                   """ Fits the Ledoit-Wolf shrunk covariance model
   368                                                   according to the given training data and parameters.
   369
   370                                                   Parameters
   371                                                   ----------
   372                                                   X: array-like, shape = [n_samples, n_features]
   373                                                     Training data, where n_samples is the number of samples
   374                                                     and n_features is the number of features.
   375                                                   y: not used, present for API consistence purpose.
   376
   377                                                   Returns
   378                                                   -------
   379                                                   self: object
   380                                                     Returns self.
   381
   382                                                   """
   383                                                   # Not calling the parent object to fit, to avoid computing the
   384                                                   # covariance matrix (and potentially the precision)
   385         1            4      4.0      0.0          if self.assume_centered:
   386                                                       self.location_ = np.zeros(X.shape[1])
   387                                                   else:
   388         1        42341  42341.0      2.2              self.location_ = X.mean(0)
   389         1         4117   4117.0      0.2          covariance, shrinkage = ledoit_wolf(X - self.location_,
   390         1            5      5.0      0.0                                              assume_centered=True,
   391         1      1344723 1344723.0     70.3                                              block_size=self.block_size)
   392         1            5      5.0      0.0          self.shrinkage_ = shrinkage
   393         1       520345 520345.0     27.2          self._set_covariance(covariance)
   394
   395         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="oas-minimadelon">
<h2>OAS-minimadelon<a class="headerlink" href="#oas-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">OAS</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">OAS</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/OAS-minimadelon-step0-timing.png" src="_images/OAS-minimadelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/OAS-minimadelon-step0-memory.png" src="_images/OAS-minimadelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         82 function calls in 0.407 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.407    0.407 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.407    0.407 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.407    0.407 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:520(fit)
     1    0.000    0.000    0.392    0.392 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.003    0.003    0.391    0.391 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     1    0.289    0.289    0.295    0.295 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     2    0.094    0.047    0.094    0.047 {numpy.core._dotblas.dot}
     1    0.002    0.002    0.015    0.015 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:401(oas)
     1    0.006    0.006    0.012    0.012 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     2    0.001    0.000    0.001    0.000 {method 'mean' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     3    0.000    0.000    0.000    0.000 {issubclass}
     6    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {isinstance}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 520
Total time: 0.428768 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   520                                               def fit(self, X, y=None):
   521                                                   """ Fits the Oracle Approximating Shrinkage covariance model
   522                                                   according to the given training data and parameters.
   523
   524                                                   Parameters
   525                                                   ----------
   526                                                   X: array-like, shape = [n_samples, n_features]
   527                                                     Training data, where n_samples is the number of samples
   528                                                     and n_features is the number of features.
   529                                                   y: not used, present for API consistence purpose.
   530
   531                                                   Returns
   532                                                   -------
   533                                                   self: object
   534                                                     Returns self.
   535
   536                                                   """
   537                                                   # Not calling the parent object to fit, to avoid computing the
   538                                                   # covariance matrix (and potentially the precision)
   539         1            4      4.0      0.0          if self.assume_centered:
   540                                                       self.location_ = np.zeros(X.shape[1])
   541                                                   else:
   542         1          145    145.0      0.0              self.location_ = X.mean(0)
   543
   544         1        13180  13180.0      3.1          covariance, shrinkage = oas(X - self.location_, assume_centered=True)
   545         1            6      6.0      0.0          self.shrinkage_ = shrinkage
   546         1       415429 415429.0     96.9          self._set_covariance(covariance)
   547
   548         1            4      4.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="oas-madelon">
<h2>OAS-madelon<a class="headerlink" href="#oas-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">OAS</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">OAS</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/OAS-madelon-step0-timing.png" src="_images/OAS-madelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/OAS-madelon-step0-memory.png" src="_images/OAS-madelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         82 function calls in 0.912 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.912    0.912 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.912    0.912 &lt;f&gt;:1(&lt;module&gt;)
     1    0.008    0.008    0.912    0.912 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:520(fit)
     1    0.000    0.000    0.497    0.497 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.496    0.496 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     2    0.465    0.232    0.465    0.232 {numpy.core._dotblas.dot}
     1    0.386    0.386    0.392    0.392 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     1    0.002    0.002    0.376    0.376 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:401(oas)
     1    0.005    0.005    0.374    0.374 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     2    0.031    0.015    0.031    0.015 {method 'mean' of 'numpy.ndarray' objects}
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     8    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     6    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 {range}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 520
Total time: 0.99787 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   520                                               def fit(self, X, y=None):
   521                                                   """ Fits the Oracle Approximating Shrinkage covariance model
   522                                                   according to the given training data and parameters.
   523
   524                                                   Parameters
   525                                                   ----------
   526                                                   X: array-like, shape = [n_samples, n_features]
   527                                                     Training data, where n_samples is the number of samples
   528                                                     and n_features is the number of features.
   529                                                   y: not used, present for API consistence purpose.
   530
   531                                                   Returns
   532                                                   -------
   533                                                   self: object
   534                                                     Returns self.
   535
   536                                                   """
   537                                                   # Not calling the parent object to fit, to avoid computing the
   538                                                   # covariance matrix (and potentially the precision)
   539         1            4      4.0      0.0          if self.assume_centered:
   540                                                       self.location_ = np.zeros(X.shape[1])
   541                                                   else:
   542         1        43315  43315.0      4.3              self.location_ = X.mean(0)
   543
   544         1       433865 433865.0     43.5          covariance, shrinkage = oas(X - self.location_, assume_centered=True)
   545         1            4      4.0      0.0          self.shrinkage_ = shrinkage
   546         1       520679 520679.0     52.2          self._set_covariance(covariance)
   547
   548         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>

        <div class="clearer"></div>
      </div>
    </div>
  

    <div class="footer">
        &copy; .
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3. Design by <a href="http://desgrana.es">Desgrana</a>.
    <span style="padding-left: 5ex;">
    <a href="_sources/vb_covariance.txt"
	    rel="nofollow">Show this page source</a>
    </span>
    </div>
     <div class="rel rellarge">
    
    <div class="buttonPrevious">
      <a href="vb_cluster.html">
        Previous
      </a>  
    </div>
    <div class="buttonNext">
      <a href="vb_decomposition.html">
        Next
      </a>  
    </div>
    
     </div>
     <script type="text/javascript">
       $("div.buttonNext, div.buttonPrevious").hover(
           function () {
               $(this).css('background-color', '#FF9C34');
           },
           function () {
               $(this).css('background-color', '#A7D6E2');
           }
       );
     </script>
  </body>
</html>


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Benchmarks for covariance &mdash; Vbench performance benchmarks for scikit-learn</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.12-git',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Vbench performance benchmarks for scikit-learn" href="index.html" />
    <link rel="next" title="Benchmarks for decomposition" href="vb_decomposition.html" />
    <link rel="prev" title="Benchmarks for cluster" href="vb_cluster.html" />

  <!-- Reference the theme's stylesheet on the Google CDN -->
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/excite-bike/jquery-ui.css"
        type="text/css" rel="Stylesheet" />
 
  <!-- Reference jQuery and jQuery UI from the CDN. Remember
       that the order of these two elements is important -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>

<script type="text/javascript">
      $(function(){
        $(".profiler-output").accordion({collapsible: true, header: "p", active: false} );
      });
    </script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22606712-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>

    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="http://scikit-learn.org/">
            <img src="_static/scikit-learn-logo-small.png" alt="Logo"/>
          </a>
          </p><div class="navbar">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="quick_start.html">Speed Quick Start</a></li>
            <li><a href="http://scikit-learn.org/dev/user_guide.html">User's Guide</a></li>
            <li><a href="http://scikit-learn.org/dev/developers/performance.html">Performance</a></li>
            <li><a href="http://github.com/scikit-learn/scikit-learn">Github</a></li>
            <li><a href="http://github.com/vene/scikit-learn-speed">Speed Github</a></li>
       </ul>
</div>
<!-- end navbar --></div>
    </div>

    <div class="content-wrapper">

      <div class="sphinxsidebar">
	<div class="sphinxsidebarwrapper">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="vb_cluster.html">Benchmarks for cluster</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Benchmarks for covariance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#graphlasso-minimadelon">GraphLasso-minimadelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#graphlasso-madelon">GraphLasso-madelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mincovdet-blobs">MinCovDet-blobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shrunkcovariance-minimadelon">ShrunkCovariance-minimadelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shrunkcovariance-madelon">ShrunkCovariance-madelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ledoitwolf-minimadelon">LedoitWolf-minimadelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ledoitwolf-madelon">LedoitWolf-madelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oas-minimadelon">OAS-minimadelon</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oas-madelon">OAS-madelon</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vb_decomposition.html">Benchmarks for decomposition</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_ensemble.html">Benchmarks for ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_gaussian_process.html">Benchmarks for gaussian_process</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_linear_model.html">Benchmarks for linear_model</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_manifold.html">Benchmarks for manifold</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_mixture.html">Benchmarks for mixture</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_naive_bayes.html">Benchmarks for naive_bayes</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_neighbors.html">Benchmarks for neighbors</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_pls.html">Benchmarks for pls</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_semi_supervised.html">Benchmarks for semi_supervised</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_svm.html">Benchmarks for svm</a></li>
<li class="toctree-l1"><a class="reference internal" href="vb_tree.html">Benchmarks for tree</a></li>
</ul>

          <!--
	   <div class="rel rellarge">
	     
	<!-- rellinks[1:] is an ugly hack to avoid link to module
	    index  --
	<div class="rellink">
	<a href="vb_cluster.html" title="Benchmarks for cluster"
	    accesskey="P">Previous
	    <br>
	    <span class="smallrellink">
	    Benchmarks for c...
	    </span>
	    <span class="hiddenrellink">
	    Benchmarks for cluster
	    </span>
	    
	    </a>
	</div>
	    <div class="spacer">
	    &nbsp;
	    </div>
	
	<div class="rellink">
	<a href="vb_decomposition.html" title="Benchmarks for decomposition"
	    accesskey="N">Next
	    <br>
	    <span class="smallrellink">
	    Benchmarks for d...
	    </span>
	    <span class="hiddenrellink">
	    Benchmarks for decomposition
	    </span>
	    
	    </a>
	</div>
	<!-- Ad a link to the 'up' page --
    </div>
    <p style="text-align: center; background-color: #FFE4E4">This documentation is
    for scikit-learn <strong>version 0.12-git</strong>
    &mdash; <a href="http://scikit-learn.org/stable/support.html#documentation-resources">Other versions</a></p>
    
    <h3>Citing</h3>
    <p>If you use the software, please consider
    <a href="about.html#citing-scikit-learn">citing scikit-learn</a>.</p>
    <h3>This page</h3>
	<ul>
<li><a class="reference internal" href="#">Benchmarks for covariance</a><ul>
<li><a class="reference internal" href="#graphlasso-minimadelon">GraphLasso-minimadelon</a></li>
<li><a class="reference internal" href="#graphlasso-madelon">GraphLasso-madelon</a></li>
<li><a class="reference internal" href="#mincovdet-blobs">MinCovDet-blobs</a></li>
<li><a class="reference internal" href="#shrunkcovariance-minimadelon">ShrunkCovariance-minimadelon</a></li>
<li><a class="reference internal" href="#shrunkcovariance-madelon">ShrunkCovariance-madelon</a></li>
<li><a class="reference internal" href="#ledoitwolf-minimadelon">LedoitWolf-minimadelon</a></li>
<li><a class="reference internal" href="#ledoitwolf-madelon">LedoitWolf-madelon</a></li>
<li><a class="reference internal" href="#oas-minimadelon">OAS-minimadelon</a></li>
<li><a class="reference internal" href="#oas-madelon">OAS-madelon</a></li>
</ul>
</li>
</ul>

    
  -->
    </div>
	  </div>


      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="benchmarks-for-covariance">
<h1>Benchmarks for covariance<a class="headerlink" href="#benchmarks-for-covariance" title="Permalink to this headline">¶</a></h1>
<div class="section" id="graphlasso-minimadelon">
<h2>GraphLasso-minimadelon<a class="headerlink" href="#graphlasso-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">GraphLasso</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">GraphLasso</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/GraphLasso-minimadelon-step0-timing.png" src="_images/GraphLasso-minimadelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/GraphLasso-minimadelon-step0-memory.png" src="_images/GraphLasso-minimadelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>Traceback</p>
<div class="highlight-python"><pre>   Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 150, in run
    exec step in ns
  File "&lt;string&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 260, in run
    mem_usages = magic_memit(ns, self.code, repeat=self.mem_repeat)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 672, in magic_memit
    raise RuntimeError('ERROR: all subprocesses exited unsuccessfully.'
RuntimeError: ERROR: all subprocesses exited unsuccessfully. Try again with the `-i` option.
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 293, in run
    prof.runcall(f)
  File "/sp/lib/python/cpython-2.7.2/lib/python2.7/cProfile.py", line 149, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 288, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 351, in run
    prof.runcall(f)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/line_profiler.py", line 137, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 348, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver</pre>
</div>
</div>
</div>
<div class="section" id="graphlasso-madelon">
<h2>GraphLasso-madelon<a class="headerlink" href="#graphlasso-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">GraphLasso</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">GraphLasso</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/GraphLasso-madelon-step0-timing.png" src="_images/GraphLasso-madelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/GraphLasso-madelon-step0-memory.png" src="_images/GraphLasso-madelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>Traceback</p>
<div class="highlight-python"><pre>   Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 150, in run
    exec step in ns
  File "&lt;string&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 260, in run
    mem_usages = magic_memit(ns, self.code, repeat=self.mem_repeat)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 672, in magic_memit
    raise RuntimeError('ERROR: all subprocesses exited unsuccessfully.'
RuntimeError: ERROR: all subprocesses exited unsuccessfully. Try again with the `-i` option.
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 293, in run
    prof.runcall(f)
  File "/sp/lib/python/cpython-2.7.2/lib/python2.7/cProfile.py", line 149, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 288, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver
Traceback (most recent call last):
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 351, in run
    prof.runcall(f)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/line_profiler.py", line 137, in runcall
    return func(*args, **kw)
  File "/home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py", line 348, in f
    exec code in ns
  File "&lt;f&gt;", line 1, in &lt;module&gt;
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 263, in fit
    max_iter=self.max_iter, verbose=self.verbose,)
  File "/tmp/vb_sklearn/sklearn/covariance/graph_lasso_.py", line 207, in graph_lasso
    raise e
FloatingPointError: Non SPD result: the system is too ill-conditioned for this solver. The system is too ill-conditioned for this solver</pre>
</div>
</div>
</div>
<div class="section" id="mincovdet-blobs">
<h2>MinCovDet-blobs<a class="headerlink" href="#mincovdet-blobs" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">MinCovDet</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;random_state&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;blobs&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">MinCovDet</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/MinCovDet-blobs-step0-timing.png" src="_images/MinCovDet-blobs-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/MinCovDet-blobs-step0-memory.png" src="_images/MinCovDet-blobs-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         11660 function calls in 0.726 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.726    0.726 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.726    0.726 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.726    0.726 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:544(fit)
     1    0.000    0.000    0.694    0.694 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:262(fast_mcd)
     2    0.014    0.007    0.694    0.347 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:154(select_candidates)
    40    0.145    0.004    0.658    0.016 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:28(c_step)
    85    0.010    0.000    0.234    0.003 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
    85    0.181    0.002    0.193    0.002 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
   326    0.161    0.000    0.161    0.000 {numpy.core._dotblas.dot}
   115    0.001    0.000    0.107    0.001 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
   115    0.040    0.000    0.105    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
   144    0.001    0.000    0.063    0.000 /tmp/vb_sklearn/sklearn/utils/extmath.py:39(_fast_logdet_numpy)
   144    0.024    0.000    0.061    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:1560(slogdet)
     1    0.001    0.001    0.029    0.029 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:615(reweight_covariance)
   906    0.025    0.000    0.025    0.000 {numpy.core.multiarray.array}
   700    0.002    0.000    0.025    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     2    0.000    0.000    0.024    0.012 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:453(isf)
     2    0.023    0.012    0.024    0.012 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:1521(isf)
   144    0.021    0.000    0.021    0.000 {numpy.linalg.lapack_lite.dgetrf}
   171    0.011    0.000    0.015    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
   231    0.011    0.000    0.011    0.000 {method 'mean' of 'numpy.ndarray' objects}
   127    0.008    0.000    0.008    0.000 {method 'sum' of 'numpy.ndarray' objects}
   502    0.005    0.000    0.005    0.000 {method 'any' of 'numpy.ndarray' objects}
    40    0.002    0.000    0.005    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:1862(allclose)
    30    0.005    0.000    0.005    0.000 {method 'permutation' of 'mtrand.RandomState' objects}
    86    0.001    0.000    0.004    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
    86    0.000    0.000    0.004    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:598(argsort)
    86    0.003    0.000    0.003    0.000 {method 'argsort' of 'numpy.ndarray' objects}
   144    0.001    0.000    0.003    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:139(_fastCopyAndTranspose)
   432    0.003    0.000    0.003    0.000 {method 'reduce' of 'numpy.ufunc' objects}
   144    0.001    0.000    0.003    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:902(diagonal)
   144    0.003    0.000    0.003    0.000 {numpy.core.multiarray._fastCopyAndTranspose}
     1    0.000    0.000    0.002    0.002 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
   250    0.002    0.000    0.002    0.000 {abs}
   144    0.001    0.000    0.002    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:99(_commonType)
    86    0.001    0.000    0.002    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
   259    0.001    0.000    0.001    0.000 {numpy.core.multiarray.zeros}
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp_svd.py:92(svdvals)
     1    0.001    0.001    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp_svd.py:14(svd)
   144    0.001    0.000    0.001    0.000 {method 'diagonal' of 'numpy.ndarray' objects}
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
   162    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1508(any)
    85    0.001    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
    85    0.001    0.000    0.001    0.000 {method 'max' of 'numpy.ndarray' objects}
    44    0.000    0.000    0.001    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:233(check_random_state)
   144    0.001    0.000    0.001    0.000 {numpy.core.multiarray.arange}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py:591(correct_covariance)
   689    0.001    0.000    0.001    0.000 {issubclass}
    96    0.000    0.000    0.001    0.000 {isinstance}
   144    0.001    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:127(_to_native_byte_order)
    85    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
   115    0.001    0.000    0.001    0.000 {method 'astype' of 'numpy.ndarray' objects}
   144    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:157(_assertSquareness)
   144    0.001    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:151(_assertRank2)
    46    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/abc.py:128(__instancecheck__)
   229    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}
   288    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:71(isComplexType)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:603(argsreduce)
   224    0.000    0.000    0.000    0.000 {getattr}
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
    40    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1579(all)
    85    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
    85    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
   115    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
   144    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/linalg/linalg.py:84(_realType)
    40    0.000    0.000    0.000    0.000 {method 'all' of 'numpy.ndarray' objects}
     6    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:32(_wrapit)
   365    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
   174    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:592(valarray)
   619    0.000    0.000    0.000    0.000 {len}
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1258(extract)
   144    0.000    0.000    0.000    0.000 {max}
    90    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/_weakrefset.py:68(__contains__)
   115    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
    88    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1458(product)
    16    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1044(ravel)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:2861(median)
    85    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:6(atleast_1d)
    86    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
   144    0.000    0.000    0.000    0.000 {min}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:300(repeat)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
    86    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:2543(_isf)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:490(sort)
    11    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     6    0.000    0.000    0.000    0.000 {map}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:1173(_argcheck)
     6    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1301(place)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
    10    0.000    0.000    0.000    0.000 {method 'reshape' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:45(take)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:1899(__call__)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     2    0.000    0.000    0.000    0.000 {method 'any' of 'numpy.generic' objects}
     2    0.000    0.000    0.000    0.000 {zip}
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1129(nonzero)
     6    0.000    0.000    0.000    0.000 {numpy.lib._compiled_base._insert}
     2    0.000    0.000    0.000    0.000 {method 'prod' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:1896(freeze)
    16    0.000    0.000    0.000    0.000 {method 'ravel' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 {method 'take' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     2    0.000    0.000    0.000    0.000 {method 'repeat' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:107(reshape)
     8    0.000    0.000    0.000    0.000 {method 'nonzero' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:635(_fix_loc_scale)
     1    0.000    0.000    0.000    0.000 {method 'flatten' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/stats/distributions.py:433(__init__)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1211(shape)
     1    0.000    0.000    0.000    0.000 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:120(get_precision)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/robust_covariance.py
Function: fit at line 544
Total time: 0.839365 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   544                                               def fit(self, X, y=None):
   545                                                   """Fits a Minimum Covariance Determinant with the FastMCD algorithm.
   546
   547                                                   Parameters
   548                                                   ----------
   549                                                   X: array-like, shape = [n_samples, n_features]
   550                                                     Training data, where n_samples is the number of samples
   551                                                     and n_features is the number of features.
   552                                                   y: not used, present for API consistence purpose.
   553
   554                                                   Returns
   555                                                   -------
   556                                                   self: object
   557                                                     Returns self.
   558
   559                                                   """
   560         1           41     41.0      0.0          self.random_state = check_random_state(self.random_state)
   561         1            4      4.0      0.0          n_samples, n_features = X.shape
   562                                                   # check that the empirical covariance is full rank
   563         1         1830   1830.0      0.2          if (linalg.svdvals(np.dot(X.T, X)) &gt; 1e-8).sum() != n_features:
   564                                                       warnings.warn("The covariance matrix associated to your dataset "
   565                                                                     "is not full rank")
   566                                                   # compute and store raw estimates
   567         1            3      3.0      0.0          raw_location, raw_covariance, raw_support, raw_dist = fast_mcd(
   568         1            2      2.0      0.0              X, support_fraction=self.support_fraction,
   569         1            3      3.0      0.0              cov_computation_method=self._nonrobust_covariance,
   570         1       829688 829688.0     98.8              random_state=self.random_state)
   571         1            4      4.0      0.0          if self.assume_centered:
   572                                                       raw_location = np.zeros(n_features)
   573                                                       raw_covariance = self._nonrobust_covariance(X[raw_support],
   574                                                                                                   assume_centered=True)
   575                                                       # get precision matrix in an optimized way
   576                                                       precision = pinvh(raw_covariance)
   577                                                       raw_dist = np.sum(np.dot(X, precision) * X, 1)
   578         1            5      5.0      0.0          self.raw_location_ = raw_location
   579         1            5      5.0      0.0          self.raw_covariance_ = raw_covariance
   580         1            3      3.0      0.0          self.raw_support_ = raw_support
   581         1            3      3.0      0.0          self.location_ = raw_location
   582         1            2      2.0      0.0          self.support_ = raw_support
   583         1            2      2.0      0.0          self.dist_ = raw_dist
   584                                                   # obtain consistency at normal models
   585         1         1110   1110.0      0.1          self.correct_covariance(X)
   586                                                   # reweight estimator
   587         1         6657   6657.0      0.8          self.reweight_covariance(X)
   588
   589         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="shrunkcovariance-minimadelon">
<h2>ShrunkCovariance-minimadelon<a class="headerlink" href="#shrunkcovariance-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">ShrunkCovariance</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">ShrunkCovariance</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/ShrunkCovariance-minimadelon-step0-timing.png" src="_images/ShrunkCovariance-minimadelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/ShrunkCovariance-minimadelon-step0-memory.png" src="_images/ShrunkCovariance-minimadelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         98 function calls in 0.403 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.403    0.403 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.403    0.403 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.403    0.403 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:105(fit)
     1    0.000    0.000    0.388    0.388 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.388    0.388 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     1    0.287    0.287    0.293    0.293 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     2    0.093    0.047    0.093    0.047 {numpy.core._dotblas.dot}
     1    0.000    0.000    0.013    0.013 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     1    0.006    0.006    0.013    0.013 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.001    0.001    0.002    0.002 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:27(shrunk_covariance)
     2    0.000    0.000    0.002    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     2    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     2    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {method 'mean' of 'numpy.ndarray' objects}
    10    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     6    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     2    0.000    0.000    0.000    0.000 {isinstance}
     3    0.000    0.000    0.000    0.000 {issubclass}
     4    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
     1    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 105
Total time: 0.430609 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   105                                               def fit(self, X, y=None):
   106                                                   """ Fits the shrunk covariance model
   107                                                   according to the given training data and parameters.
   108
   109                                                   Parameters
   110                                                   ----------
   111                                                   X: array-like, shape = [n_samples, n_features]
   112                                                     Training data, where n_samples is the number of samples
   113                                                     and n_features is the number of features.
   114                                                   y: not used, present for API consistence purpose.
   115
   116                                                   assume_centered: Boolean
   117                                                     If True, data are not centered before computation.
   118                                                     Useful to work with data whose mean is significantly equal to
   119                                                     zero but is not exactly zero.
   120                                                     If False, data are centered before computation.
   121
   122                                                   Returns
   123                                                   -------
   124                                                   self: object
   125                                                     Returns self.
   126
   127                                                   """
   128                                                   # Not calling the parent object to fit, to avoid a potential
   129                                                   # matrix inversion when setting the precision
   130         1            4      4.0      0.0          if self.assume_centered:
   131                                                       self.location_ = np.zeros(X.shape[1])
   132                                                   else:
   133         1          147    147.0      0.0              self.location_ = X.mean(0)
   134         1            2      2.0      0.0          covariance = empirical_covariance(
   135         1        10827  10827.0      2.5              X, assume_centered=self.assume_centered)
   136         1         1586   1586.0      0.4          covariance = shrunk_covariance(covariance, self.shrinkage)
   137         1       418040 418040.0     97.1          self._set_covariance(covariance)
   138
   139         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="shrunkcovariance-madelon">
<h2>ShrunkCovariance-madelon<a class="headerlink" href="#shrunkcovariance-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">ShrunkCovariance</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">ShrunkCovariance</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/ShrunkCovariance-madelon-step0-timing.png" src="_images/ShrunkCovariance-madelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/ShrunkCovariance-madelon-step0-memory.png" src="_images/ShrunkCovariance-madelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         98 function calls in 0.955 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.955    0.955 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.955    0.955 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.955    0.955 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:105(fit)
     1    0.000    0.000    0.532    0.532 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.531    0.531 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     2    0.441    0.221    0.441    0.221 {numpy.core._dotblas.dot}
     1    0.409    0.409    0.415    0.415 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     1    0.000    0.000    0.394    0.394 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     1    0.008    0.008    0.394    0.394 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:1888(cov)
     2    0.054    0.027    0.054    0.027 {method 'mean' of 'numpy.ndarray' objects}
     2    0.031    0.016    0.033    0.016 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
    10    0.005    0.000    0.005    0.000 {numpy.core.multiarray.array}
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.001    0.001    0.002    0.002 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:27(shrunk_covariance)
     2    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     2    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     2    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     2    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     6    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     2    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 {method 'squeeze' of 'numpy.ndarray' objects}
     8    0.000    0.000    0.000    0.000 {len}
     4    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'conj' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 105
Total time: 1.05905 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   105                                               def fit(self, X, y=None):
   106                                                   """ Fits the shrunk covariance model
   107                                                   according to the given training data and parameters.
   108
   109                                                   Parameters
   110                                                   ----------
   111                                                   X: array-like, shape = [n_samples, n_features]
   112                                                     Training data, where n_samples is the number of samples
   113                                                     and n_features is the number of features.
   114                                                   y: not used, present for API consistence purpose.
   115
   116                                                   assume_centered: Boolean
   117                                                     If True, data are not centered before computation.
   118                                                     Useful to work with data whose mean is significantly equal to
   119                                                     zero but is not exactly zero.
   120                                                     If False, data are centered before computation.
   121
   122                                                   Returns
   123                                                   -------
   124                                                   self: object
   125                                                     Returns self.
   126
   127                                                   """
   128                                                   # Not calling the parent object to fit, to avoid a potential
   129                                                   # matrix inversion when setting the precision
   130         1            3      3.0      0.0          if self.assume_centered:
   131                                                       self.location_ = np.zeros(X.shape[1])
   132                                                   else:
   133         1        40174  40174.0      3.8              self.location_ = X.mean(0)
   134         1            3      3.0      0.0          covariance = empirical_covariance(
   135         1       482755 482755.0     45.6              X, assume_centered=self.assume_centered)
   136         1         1565   1565.0      0.1          covariance = shrunk_covariance(covariance, self.shrinkage)
   137         1       534547 534547.0     50.5          self._set_covariance(covariance)
   138
   139         1            4      4.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="ledoitwolf-minimadelon">
<h2>LedoitWolf-minimadelon<a class="headerlink" href="#ledoitwolf-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">LedoitWolf</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">LedoitWolf</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/LedoitWolf-minimadelon-step0-timing.png" src="_images/LedoitWolf-minimadelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/LedoitWolf-minimadelon-step0-memory.png" src="_images/LedoitWolf-minimadelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         102 function calls in 0.438 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.438    0.438 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.438    0.438 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.438    0.438 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:366(fit)
     1    0.000    0.000    0.411    0.411 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.410    0.410 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     1    0.286    0.286    0.292    0.292 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     4    0.128    0.032    0.128    0.032 {numpy.core._dotblas.dot}
     1    0.001    0.001    0.027    0.027 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:236(ledoit_wolf)
     1    0.002    0.002    0.016    0.016 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:145(ledoit_wolf_shrinkage)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     1    0.005    0.005    0.010    0.010 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     6    0.002    0.000    0.002    0.000 {method 'sum' of 'numpy.ndarray' objects}
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     5    0.000    0.000    0.001    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.000    0.000    0.000    0.000 {method 'mean' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     9    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     6    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'sum' of 'numpy.generic' objects}
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 {range}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     7    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 366
Total time: 0.494282 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   366                                               def fit(self, X, y=None):
   367                                                   """ Fits the Ledoit-Wolf shrunk covariance model
   368                                                   according to the given training data and parameters.
   369
   370                                                   Parameters
   371                                                   ----------
   372                                                   X: array-like, shape = [n_samples, n_features]
   373                                                     Training data, where n_samples is the number of samples
   374                                                     and n_features is the number of features.
   375                                                   y: not used, present for API consistence purpose.
   376
   377                                                   Returns
   378                                                   -------
   379                                                   self: object
   380                                                     Returns self.
   381
   382                                                   """
   383                                                   # Not calling the parent object to fit, to avoid computing the
   384                                                   # covariance matrix (and potentially the precision)
   385         1            4      4.0      0.0          if self.assume_centered:
   386                                                       self.location_ = np.zeros(X.shape[1])
   387                                                   else:
   388         1          153    153.0      0.0              self.location_ = X.mean(0)
   389         1           87     87.0      0.0          covariance, shrinkage = ledoit_wolf(X - self.location_,
   390         1            3      3.0      0.0                                              assume_centered=True,
   391         1        25296  25296.0      5.1                                              block_size=self.block_size)
   392         1            5      5.0      0.0          self.shrinkage_ = shrinkage
   393         1       468730 468730.0     94.8          self._set_covariance(covariance)
   394
   395         1            4      4.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="ledoitwolf-madelon">
<h2>LedoitWolf-madelon<a class="headerlink" href="#ledoitwolf-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">LedoitWolf</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">LedoitWolf</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/LedoitWolf-madelon-step0-timing.png" src="_images/LedoitWolf-madelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/LedoitWolf-madelon-step0-memory.png" src="_images/LedoitWolf-madelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         102 function calls in 1.840 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    1.840    1.840 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    1.840    1.840 &lt;f&gt;:1(&lt;module&gt;)
     1    0.008    0.008    1.840    1.840 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:366(fit)
     4    1.342    0.336    1.342    0.336 {numpy.core._dotblas.dot}
     1    0.001    0.001    1.278    1.278 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:236(ledoit_wolf)
     1    0.007    0.007    0.853    0.853 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:145(ledoit_wolf_shrinkage)
     1    0.000    0.000    0.523    0.523 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.522    0.522 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     1    0.005    0.005    0.424    0.424 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     1    0.399    0.399    0.405    0.405 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     6    0.032    0.005    0.032    0.005 {method 'sum' of 'numpy.ndarray' objects}
     5    0.000    0.000    0.032    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1379(sum)
     1    0.030    0.030    0.030    0.030 {method 'mean' of 'numpy.ndarray' objects}
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     8    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     6    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     9    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {method 'sum' of 'numpy.generic' objects}
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     7    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     1    0.000    0.000    0.000    0.000 {range}
     3    0.000    0.000    0.000    0.000 {issubclass}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 366
Total time: 1.92907 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   366                                               def fit(self, X, y=None):
   367                                                   """ Fits the Ledoit-Wolf shrunk covariance model
   368                                                   according to the given training data and parameters.
   369
   370                                                   Parameters
   371                                                   ----------
   372                                                   X: array-like, shape = [n_samples, n_features]
   373                                                     Training data, where n_samples is the number of samples
   374                                                     and n_features is the number of features.
   375                                                   y: not used, present for API consistence purpose.
   376
   377                                                   Returns
   378                                                   -------
   379                                                   self: object
   380                                                     Returns self.
   381
   382                                                   """
   383                                                   # Not calling the parent object to fit, to avoid computing the
   384                                                   # covariance matrix (and potentially the precision)
   385         1            4      4.0      0.0          if self.assume_centered:
   386                                                       self.location_ = np.zeros(X.shape[1])
   387                                                   else:
   388         1        30340  30340.0      1.6              self.location_ = X.mean(0)
   389         1         4356   4356.0      0.2          covariance, shrinkage = ledoit_wolf(X - self.location_,
   390         1            5      5.0      0.0                                              assume_centered=True,
   391         1      1338275 1338275.0     69.4                                              block_size=self.block_size)
   392         1            7      7.0      0.0          self.shrinkage_ = shrinkage
   393         1       556076 556076.0     28.8          self._set_covariance(covariance)
   394
   395         1            4      4.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="oas-minimadelon">
<h2>OAS-minimadelon<a class="headerlink" href="#oas-minimadelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">OAS</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;minimadelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">OAS</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/OAS-minimadelon-step0-timing.png" src="_images/OAS-minimadelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/OAS-minimadelon-step0-memory.png" src="_images/OAS-minimadelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         82 function calls in 0.404 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.404    0.404 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.404    0.404 &lt;f&gt;:1(&lt;module&gt;)
     1    0.000    0.000    0.404    0.404 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:520(fit)
     1    0.000    0.000    0.389    0.389 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.388    0.388 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     1    0.287    0.287    0.293    0.293 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     2    0.093    0.047    0.093    0.047 {numpy.core._dotblas.dot}
     1    0.002    0.002    0.015    0.015 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:401(oas)
     1    0.006    0.006    0.012    0.012 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     2    0.001    0.000    0.001    0.000 {method 'mean' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     2    0.000    0.000    0.000    0.000 {abs}
     8    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 {min}
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     6    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {isinstance}
     1    0.000    0.000    0.000    0.000 {range}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 520
Total time: 0.427907 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   520                                               def fit(self, X, y=None):
   521                                                   """ Fits the Oracle Approximating Shrinkage covariance model
   522                                                   according to the given training data and parameters.
   523
   524                                                   Parameters
   525                                                   ----------
   526                                                   X: array-like, shape = [n_samples, n_features]
   527                                                     Training data, where n_samples is the number of samples
   528                                                     and n_features is the number of features.
   529                                                   y: not used, present for API consistence purpose.
   530
   531                                                   Returns
   532                                                   -------
   533                                                   self: object
   534                                                     Returns self.
   535
   536                                                   """
   537                                                   # Not calling the parent object to fit, to avoid computing the
   538                                                   # covariance matrix (and potentially the precision)
   539         1            4      4.0      0.0          if self.assume_centered:
   540                                                       self.location_ = np.zeros(X.shape[1])
   541                                                   else:
   542         1          146    146.0      0.0              self.location_ = X.mean(0)
   543
   544         1        12936  12936.0      3.0          covariance, shrinkage = oas(X - self.location_, assume_centered=True)
   545         1            4      4.0      0.0          self.shrinkage_ = shrinkage
   546         1       414814 414814.0     96.9          self._set_covariance(covariance)
   547
   548         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
<div class="section" id="oas-madelon">
<h2>OAS-madelon<a class="headerlink" href="#oas-madelon" title="Permalink to this headline">¶</a></h2>
<p><strong>Benchmark setup</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sklearn.covariance</span> <span class="kn">import</span> <span class="n">OAS</span>
<span class="kn">from</span> <span class="nn">deps</span> <span class="kn">import</span> <span class="n">load_data</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">X_t</span><span class="p">,</span> <span class="n">y_t</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s">&#39;madelon&#39;</span><span class="p">)</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">OAS</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Benchmark statement</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">obj</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Execution time</strong></p>
<img alt="_images/OAS-madelon-step0-timing.png" src="_images/OAS-madelon-step0-timing.png" style="width: 6in;" />
<p><strong>Memory usage</strong></p>
<img alt="_images/OAS-madelon-step0-memory.png" src="_images/OAS-madelon-step0-memory.png" style="width: 6in;" />
<p><strong>Additional output</strong></p>
<div class="profiler-output container">
<p>cProfile</p>
<div class="highlight-python"><pre>         82 function calls in 0.923 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.923    0.923 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/vbench/benchmark.py:286(f)
     1    0.000    0.000    0.923    0.923 &lt;f&gt;:1(&lt;module&gt;)
     1    0.008    0.008    0.923    0.923 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:520(fit)
     1    0.000    0.000    0.510    0.510 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:98(_set_covariance)
     1    0.002    0.002    0.509    0.509 /tmp/vb_sklearn/sklearn/utils/extmath.py:323(pinvh)
     2    0.465    0.232    0.465    0.232 {numpy.core._dotblas.dot}
     1    0.398    0.398    0.404    0.404 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/decomp.py:196(eigh)
     1    0.002    0.002    0.376    0.376 /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py:401(oas)
     1    0.005    0.005    0.373    0.373 /tmp/vb_sklearn/sklearn/covariance/empirical_covariance_.py:37(empirical_covariance)
     2    0.031    0.016    0.031    0.016 {method 'mean' of 'numpy.ndarray' objects}
     2    0.010    0.005    0.012    0.006 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/function_base.py:526(asarray_chkfinite)
     4    0.002    0.000    0.002    0.000 {method 'any' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:75(array2d)
     1    0.000    0.000    0.001    0.001 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:2299(mean)
     1    0.000    0.000    0.001    0.001 /tmp/vb_sklearn/sklearn/utils/validation.py:14(_assert_all_finite)
     1    0.001    0.001    0.001    0.001 {method 'sum' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:60(get_lapack_funcs)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:986(trace)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/base.py:553(isspmatrix)
     7    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:167(asarray)
     1    0.000    0.000    0.000    0.000 {method 'trace' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:45(find_best_lapack_type)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/sparse/sputils.py:116(_isinstance)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/shape_base.py:58(atleast_2d)
     8    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
     2    0.000    0.000    0.000    0.000 {abs}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/fromnumeric.py:1774(amax)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/getlimits.py:91(__new__)
     1    0.000    0.000    0.000    0.000 {method 'max' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/lib/type_check.py:235(iscomplexobj)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:65(zeros_like)
     1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
     4    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
     1    0.000    0.000    0.000    0.000 {min}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:237(asanyarray)
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/lapack.py:23(cast_to_lapack_prefix)
     2    0.000    0.000    0.000    0.000 {getattr}
     1    0.000    0.000    0.000    0.000 {method 'fill' of 'numpy.ndarray' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/numpy/core/numeric.py:449(isfortran)
     1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.empty_like}
     3    0.000    0.000    0.000    0.000 {issubclass}
     1    0.000    0.000    0.000    0.000 {isinstance}
     6    0.000    0.000    0.000    0.000 {len}
     1    0.000    0.000    0.000    0.000 {range}
     1    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
     3    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
     1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}
     1    0.000    0.000    0.000    0.000 /home/slave/virtualenvs/cpython-2.7.2/lib/python2.7/site-packages/scipy/linalg/misc.py:22(_datacopied)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</pre>
</div>
<p>LineProfiler</p>
<div class="highlight-python"><pre>   Timer unit: 1e-06 s

File: /tmp/vb_sklearn/sklearn/covariance/shrunk_covariance_.py
Function: fit at line 520
Total time: 1.02485 s

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
   520                                               def fit(self, X, y=None):
   521                                                   """ Fits the Oracle Approximating Shrinkage covariance model
   522                                                   according to the given training data and parameters.
   523
   524                                                   Parameters
   525                                                   ----------
   526                                                   X: array-like, shape = [n_samples, n_features]
   527                                                     Training data, where n_samples is the number of samples
   528                                                     and n_features is the number of features.
   529                                                   y: not used, present for API consistence purpose.
   530
   531                                                   Returns
   532                                                   -------
   533                                                   self: object
   534                                                     Returns self.
   535
   536                                                   """
   537                                                   # Not calling the parent object to fit, to avoid computing the
   538                                                   # covariance matrix (and potentially the precision)
   539         1            3      3.0      0.0          if self.assume_centered:
   540                                                       self.location_ = np.zeros(X.shape[1])
   541                                                   else:
   542         1        30584  30584.0      3.0              self.location_ = X.mean(0)
   543
   544         1       457588 457588.0     44.6          covariance, shrinkage = oas(X - self.location_, assume_centered=True)
   545         1            5      5.0      0.0          self.shrinkage_ = shrinkage
   546         1       536671 536671.0     52.4          self._set_covariance(covariance)
   547
   548         1            3      3.0      0.0          return self</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>

        <div class="clearer"></div>
      </div>
    </div>
  

    <div class="footer">
        &copy; .
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3. Design by <a href="http://desgrana.es">Desgrana</a>.
    <span style="padding-left: 5ex;">
    <a href="_sources/vb_covariance.txt"
	    rel="nofollow">Show this page source</a>
    </span>
    </div>
     <div class="rel rellarge">
    
    <div class="buttonPrevious">
      <a href="vb_cluster.html">
        Previous
      </a>  
    </div>
    <div class="buttonNext">
      <a href="vb_decomposition.html">
        Next
      </a>  
    </div>
    
     </div>
     <script type="text/javascript">
       $("div.buttonNext, div.buttonPrevious").hover(
           function () {
               $(this).css('background-color', '#FF9C34');
           },
           function () {
               $(this).css('background-color', '#A7D6E2');
           }
       );
     </script>
  </body>
</html>